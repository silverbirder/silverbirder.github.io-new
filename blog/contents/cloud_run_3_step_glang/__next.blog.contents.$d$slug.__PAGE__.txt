1:"$Sreact.fragment"
2:I[36926,["/silverbirder.github.io-new/_next/static/chunks/bf74a39339583e3f.js","/silverbirder.github.io-new/_next/static/chunks/0d4a7a041349640b.js","/silverbirder.github.io-new/_next/static/chunks/2af2c9ac095cc29a.js","/silverbirder.github.io-new/_next/static/chunks/192ccf60ce702378.js"],"PostArticle"]
7:I[49032,["/silverbirder.github.io-new/_next/static/chunks/67e37ec50aac1031.js","/silverbirder.github.io-new/_next/static/chunks/e04b806875559f41.js"],"OutletBoundary"]
8:"$Sreact.suspense"
3:Tb633,"use strict";
const {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];
const {useMDXComponents: _provideComponents} = arguments[0];
function _createMdxContent(props) {
  const _components = {
    a: "a",
    blockquote: "blockquote",
    code: "code",
    div: "div",
    figure: "figure",
    h2: "h2",
    img: "img",
    p: "p",
    pre: "pre",
    span: "span",
    ..._provideComponents(),
    ...props.components
  };
  return _jsxs(_Fragment, {
    children: [_jsx(_components.h2, {
      id: "cloud-run-とは",
      children: _jsx(_components.a, {
        className: "mdx-heading-anchor",
        href: "#cloud-run-とは",
        children: "Cloud Run とは"
      })
    }), "\n", _jsxs(_components.blockquote, {
      children: ["\n", _jsx(_components.p, {
        children: "Cloud Run is a managed compute platform that enables you to run stateless containers that are invocable via HTTP requests. Cloud Run is serverless"
      }), "\n"]
    }), "\n", _jsxs(_components.p, {
      children: ["※ ", _jsx(_components.a, {
        href: "https://cloud.google.com/run/",
        children: "https://cloud.google.com/run/"
      })]
    }), "\n", _jsx(_components.p, {
      children: "詳しくは割愛するが、Cloud Functions や App Engine と同じようなサーバーレスで動作するもの。\nコンテナを deploy するため、GKE から制御することもできる。"
    }), "\n", _jsx(_components.p, {
      children: _jsx(_components.a, {
        href: "https://japan.zdnet.com/article/35135525/",
        children: _jsx(_components.img, {
          src: "https://res.cloudinary.com/silverbirder/image/upload/v1693376921/silver-birder.github.io/blog/190410-abrigednews-02-google-devops-with-serverless.png",
          alt: "Cloud Run Deploy"
        })
      })
    }), "\n", _jsx(_components.h2, {
      id: "デプロイしてみた",
      children: _jsx(_components.a, {
        className: "mdx-heading-anchor",
        href: "#デプロイしてみた",
        children: "デプロイしてみた"
      })
    }), "\n", _jsxs(_components.div, {
      className: "remark-link-card-plus__container",
      children: ["\n  ", _jsxs(_components.a, {
        href: "https://cloud.google.com/run/docs/quickstarts/build-and-deploy",
        target: "_blank",
        rel: "noreferrer noopener",
        className: "remark-link-card-plus__card",
        children: ["\n    ", _jsxs(_components.div, {
          className: "remark-link-card-plus__main",
          children: ["\n  ", _jsxs(_components.div, {
            className: "remark-link-card-plus__content",
            children: ["\n    ", _jsx(_components.div, {
              className: "remark-link-card-plus__title",
              children: "Quickstarts  |  Cloud Run  |  Google Cloud Documentation"
            }), "\n    ", _jsx(_components.div, {
              className: "remark-link-card-plus__description"
            }), "\n  "]
          }), "\n  ", _jsxs(_components.div, {
            className: "remark-link-card-plus__meta",
            children: ["\n    ", _jsx(_components.img, {
              src: "https://www.gstatic.com/devrel-devsite/prod/v5f5028bd8220352863507a1bacc6e2ea79a725fdb2dd736f205c6da16a3d00d1/clouddocs/images/favicons/onecloud/favicon.ico",
              className: "remark-link-card-plus__favicon",
              width: "14",
              height: "14",
              alt: ""
            }), "\n    ", _jsx(_components.span, {
              className: "remark-link-card-plus__url",
              children: "cloud.google.com"
            }), "\n  "]
          }), "\n"]
        }), "\n", _jsxs(_components.div, {
          className: "remark-link-card-plus__thumbnail",
          children: ["\n  ", _jsx(_components.img, {
            src: "https://docs.cloud.google.com/_static/cloud/images/social-icon-google-cloud-1200-630.png",
            className: "remark-link-card-plus__image",
            alt: ""
          }), "\n"]
        }), "\n  "]
      }), "\n"]
    }), "\n", _jsx(_components.p, {
      children: "を参考に進めていく。"
    }), "\n", _jsx(_components.p, {
      children: "ちなみに、動作環境は下記コンテナ内に行う。"
    }), "\n", _jsxs(_components.div, {
      className: "remark-link-card-plus__container",
      children: ["\n  ", _jsxs(_components.a, {
        href: "https://hub.docker.com/r/google/cloud-sdk",
        target: "_blank",
        rel: "noreferrer noopener",
        className: "remark-link-card-plus__card",
        children: ["\n    ", _jsxs(_components.div, {
          className: "remark-link-card-plus__main",
          children: ["\n  ", _jsxs(_components.div, {
            className: "remark-link-card-plus__content",
            children: ["\n    ", _jsx(_components.div, {
              className: "remark-link-card-plus__title",
              children: "google/cloud-sdk - Docker Image"
            }), "\n    ", _jsx(_components.div, {
              className: "remark-link-card-plus__description"
            }), "\n  "]
          }), "\n  ", _jsxs(_components.div, {
            className: "remark-link-card-plus__meta",
            children: ["\n    ", _jsx(_components.img, {
              src: "https://hub.docker.com/favicon.ico",
              className: "remark-link-card-plus__favicon",
              width: "14",
              height: "14",
              alt: ""
            }), "\n    ", _jsx(_components.span, {
              className: "remark-link-card-plus__url",
              children: "hub.docker.com"
            }), "\n  "]
          }), "\n"]
        }), "\n", _jsxs(_components.div, {
          className: "remark-link-card-plus__thumbnail",
          children: ["\n  ", _jsx(_components.img, {
            src: "https://img.shields.io/docker/pulls/google/cloud-sdk.svg",
            className: "remark-link-card-plus__image",
            alt: ""
          }), "\n"]
        }), "\n  "]
      }), "\n"]
    }), "\n", _jsx(_components.h2, {
      id: "step1-gcloud-の各種設定",
      children: _jsx(_components.a, {
        className: "mdx-heading-anchor",
        href: "#step1-gcloud-の各種設定",
        children: "step1. gcloud の各種設定"
      })
    }), "\n", _jsx(_components.figure, {
      "data-rehype-pretty-code-figure": "",
      children: _jsx(_components.pre, {
        tabIndex: "0",
        "data-language": "shell",
        "data-theme": "github-dark github-light",
        children: _jsxs(_components.code, {
          "data-language": "shell",
          "data-theme": "github-dark github-light",
          style: {
            display: "grid"
          },
          children: [_jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "gcloud"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " components"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " update"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "gcloud"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " components"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " install"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " beta"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "gcloud"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " config"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " set"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " run/region"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " us-central1"
            })]
          })]
        })
      })
    }), "\n", _jsx(_components.p, {
      children: "※ 2019/04/11 時点では、Cloud Run は beta."
    }), "\n", _jsx(_components.h2, {
      id: "step2-アプリケーションコードの作成",
      children: _jsx(_components.a, {
        className: "mdx-heading-anchor",
        href: "#step2-アプリケーションコードの作成",
        children: "step2. アプリケーションコードの作成"
      })
    }), "\n", _jsx(_components.figure, {
      "data-rehype-pretty-code-figure": "",
      children: _jsx(_components.pre, {
        tabIndex: "0",
        "data-language": "shell",
        "data-theme": "github-dark github-light",
        children: _jsxs(_components.code, {
          "data-language": "shell",
          "data-theme": "github-dark github-light",
          style: {
            display: "grid"
          },
          children: [_jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "mkdir"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " helloworld-go"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " && "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: "cd"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " helloworld-go"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "touch"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " helloworld.go"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " Dockerfile"
            })]
          })]
        })
      })
    }), "\n", _jsx(_components.figure, {
      "data-rehype-pretty-code-figure": "",
      children: _jsx(_components.pre, {
        tabIndex: "0",
        "data-language": "go",
        "data-theme": "github-dark github-light",
        children: _jsxs(_components.code, {
          "data-language": "go",
          "data-theme": "github-dark github-light",
          style: {
            display: "grid"
          },
          children: [_jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: "package"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: " main"
            })]
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: " "
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: "import"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " ("
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "        \""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "fmt"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "\""
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "        \""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "log"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "\""
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "        \""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "net/http"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "\""
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "        \""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "os"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "\""
            })]
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ")"
            })
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: " "
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: "func"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: " handler"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "("
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#FFAB70",
                "--shiki-light": "#E36209"
              },
              children: "w"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: " http"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "."
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "ResponseWriter"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ", "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#FFAB70",
                "--shiki-light": "#E36209"
              },
              children: "r"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: " *"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "http"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "."
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "Request"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ") {"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "        log."
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "Print"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "("
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "\"Hello world received a request.\""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ")"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "        target "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: ":="
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " os."
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "Getenv"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "("
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "\"TARGET\""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ")"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: "        if"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " target "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: "=="
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " \"\""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " {"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "                target "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: "="
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " \"World\""
            })]
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "        }"
            })
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "        fmt."
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "Fprintf"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "(w, "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "\"Hello "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: "%s"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "!"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: "\\n"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "\""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ", target)"
            })]
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "}"
            })
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: " "
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: "func"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: " main"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "() {"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "        log."
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "Print"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "("
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "\"Hello world sample started.\""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ")"
            })]
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: " "
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "        http."
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "HandleFunc"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "("
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "\"/\""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ", handler)"
            })]
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: " "
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "        port "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: ":="
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " os."
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "Getenv"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "("
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "\"PORT\""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ")"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: "        if"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " port "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: "=="
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " \"\""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " {"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "                port "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: "="
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " \"8080\""
            })]
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "        }"
            })
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: " "
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "        log."
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "Fatal"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "(http."
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "ListenAndServe"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "(fmt."
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "Sprintf"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "("
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "\":"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: "%s"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "\""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ", port), "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: "nil"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "))"
            })]
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "}"
            })
          })]
        })
      })
    }), "\n", _jsx(_components.figure, {
      "data-rehype-pretty-code-figure": "",
      children: _jsx(_components.pre, {
        tabIndex: "0",
        "data-language": "Dockerfile",
        "data-theme": "github-dark github-light",
        children: _jsxs(_components.code, {
          "data-language": "Dockerfile",
          "data-theme": "github-dark github-light",
          style: {
            display: "grid"
          },
          children: [_jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              children: "## Use the offical Golang image to create a build artifact."
            })
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              children: "## This is based on Debian and sets the GOPATH to /go."
            })
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              children: "## https://hub.docker.com/_/golang"
            })
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              children: "FROM golang:1.12 as builder"
            })
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: " "
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              children: "## Copy local code to the container image."
            })
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              children: "WORKDIR /go/src/github.com/knative/docs/helloworld"
            })
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              children: "COPY . ."
            })
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: " "
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              children: "## Build the command inside the container."
            })
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              children: "## (You may fetch or manage dependencies here,"
            })
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              children: "## either manually or with a tool like \"godep\".)"
            })
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              children: "RUN CGO_ENABLED=0 GOOS=linux go build -v -o helloworld"
            })
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: " "
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              children: "## Use a Docker multi-stage build to create a lean production image."
            })
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              children: "## https://docs.docker.com/develop/develop-images/multistage-build/#use-multi-stage-builds"
            })
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              children: "FROM alpine"
            })
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: " "
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              children: "## Copy the binary to the production image from the builder stage."
            })
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              children: "COPY --from=builder /go/src/github.com/knative/docs/helloworld/helloworld /helloworld"
            })
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: " "
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              children: "## Run the web service on container startup."
            })
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              children: "CMD [\"/helloworld\"]"
            })
          })]
        })
      })
    }), "\n", _jsx(_components.h2, {
      id: "step3-登録デプロイ",
      children: _jsx(_components.a, {
        className: "mdx-heading-anchor",
        href: "#step3-登録デプロイ",
        children: "step3. 登録&デプロイ"
      })
    }), "\n", _jsx(_components.figure, {
      "data-rehype-pretty-code-figure": "",
      children: _jsx(_components.pre, {
        tabIndex: "0",
        "data-language": "shell",
        "data-theme": "github-dark github-light",
        children: _jsxs(_components.code, {
          "data-language": "shell",
          "data-theme": "github-dark github-light",
          style: {
            display: "grid"
          },
          children: [_jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "gcloud"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " builds"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " submit"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: " --tag"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " gcr.io/[PROJECT-ID]/helloworld"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "gcloud"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " beta"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " run"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " deploy"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: " --image"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " gcr.io/[PROJECT-ID]/helloworld"
            })]
          })]
        })
      })
    }), "\n", _jsx(_components.p, {
      children: _jsx(_components.img, {
        src: "https://res.cloudinary.com/silverbirder/image/upload/v1613818551/silver-birder.github.io/blog/D34Fl0ZU4AA-dhU.png",
        alt: "result"
      })
    }), "\n", _jsx(_components.h2, {
      id: "感想",
      children: _jsx(_components.a, {
        className: "mdx-heading-anchor",
        href: "#感想",
        children: "感想"
      })
    }), "\n", _jsxs(_components.p, {
      children: ["普段私は、個人開発をしているときによくつかっている ", _jsx(_components.a, {
        href: "https://zeit.co/now",
        children: "now.sh"
      }), "という Serverless Deployments を使っている。こちらは、v1 のときは docker コンテナを使えていたのだが、v2 になると使えなくなってしまった。ただ、無料で簡単にデプロイできるものを選んでいると、こちらのサービスが最善だと感じていた。"]
    }), "\n", _jsxs(_components.p, {
      children: ["しかし、今回の GoogleCloudNext19 の発表で、CloudRun というものを Beta 版でリリースされたことを知り、早速使ってみた。\n何事もなく、今回の手順を進めて一切失敗することなく、3 分以内にデプロイまで進めることができた。\nこれは、なんて楽で便利なんだと感心してしまった。\nまた、", _jsx(_components.a, {
        href: "https://cloud.google.com/run/pricing",
        children: "価格テーブル"
      }), "を見ると、CloudFunctions のようなリクエストによる従量課金制で、月 2 百万リクエストまで無料だ。個人開発においては、AppEngine のようなインスタンス起動時間による料金設定よりも、こちらの方が断然オトク。\nこれはもう now.sh をやめて、こっちに乗り換えるっきゃない!!"]
    })]
  });
}
function MDXContent(props = {}) {
  const {wrapper: MDXLayout} = {
    ..._provideComponents(),
    ...props.components
  };
  return MDXLayout ? _jsx(MDXLayout, {
    ...props,
    children: _jsx(_createMdxContent, {
      ...props
    })
  }) : _createMdxContent(props);
}
return {
  default: MDXContent
};
0:{"buildId":"MMD6f_EM1muSxXBMwm7nb","rsc":["$","$1","c",{"children":[["$","$L2",null,{"comments":{"shortname":"https-silverbirder-github-io","url":"https://silverbirder.github.io/silverbirder.github.io-new/blog/contents/cloud_run_3_step_glang/"},"compiledSource":"$3","followLinks":{"bluesky":"https://bsky.app/profile/silverbirder.bsky.social","github":"https://github.com/silverbirder","rss":"https://silverbirder.github.io/silverbirder.github.io-new/rss.xml","threads":"https://www.threads.com/@silverbirder","x":"https://x.com/silverbirder"},"meta":{"postNumber":3,"publishedAt":"2019-04-11","tags":["クラウドインフラ","Golang","DevOps","クローリング"],"title":"Cloud Runをたった3ステップでデプロイしてみた (golang)"},"navigation":{"next":{"href":"/blog/contents/start_the_learning_kubernetes_01","publishedAt":"2019-04-18","title":"一足遅れて Kubernetes を学び始める  - 01. 環境選択編 -"},"prev":{"href":"/blog/contents/Introduce_SESAME","publishedAt":"2019-04-08","title":"SESAME(セサミ) が届いたよ！"}},"relatedPosts":[{"posts":[{"publishedAt":"2024-03-29","slug":"try-container-structure-test","summary":"Dockerイメージ内の構造や設定が期待通りかどうかを検証する `container-structure-test` を知りました。container-structure-test GitHub リポジトリ。せっかくなので、試してみました。","tags":["テスト","クラウドインフラ"],"title":"Docker Image に 構造化テスト container-structure-test を試してみた"},{"publishedAt":"2021-11-26","slug":"a_mockable_unit_testing_method_that_can_be_completed_only_with_big_query","summary":"BigQuery、皆さん使っていますか？ 私は、業務でBigQueryを使ったデータ構築をしています。品質担保のため、BigQueryのSQLに対してテストをしたいと考えています。本記事では、BigQueryだけで完結し、かつ、Mockデータを差し替え可能なユニットテスト手法について、紹介します。","tags":["フロントエンド","クラウドインフラ","テスト"],"title":"BigQueryだけで完結するモック可能なユニットテスト手法"},{"publishedAt":"2021-08-28","slug":"learn_point_from_building_tiktok_scrape_platform_on_gcp","summary":"TikTokへスクレイプするバッチをGCP上で構築しました。GCP構築のシステム設計話と、その構築時に、ハマったことを共有します。","tags":["サービス","クラウドインフラ","成果物","クローリング"],"title":"TikTokスクレイプ基盤をGCP上で構築してハマったこと"}],"tag":"クラウドインフラ"},{"posts":[{"publishedAt":"2023-06-29","slug":"unleash_feature_flag","summary":"フィーチャーフラグ（Feature Flag）をご存知でしょうか？これは新機能のリリース制御やABテストを容易にする強力なツールです。しかし、適切な管理ツールなければ、フィーチャーフラグの管理は容易なことではありません。今回は、そんなフィーチャーフラグの管理を効率化するツール、**Unleash**について解説します。","tags":["DevOps"],"title":"Unleashで始めるフィーチャーフラグ"},{"publishedAt":"2023-01-03","slug":"automated_synchronisation_using_github_actions_and_pull_requests","summary":"あけまして、おめでとうございます。神社のおみくじで、人生はじめて大吉を引きました、silverbirder です。普段の業務で、FigmaのデザイントークンやAPIのスキーマファイル、i18nのメッセージファイルなどを、フロントエンドへ同期するコミュニケーションが不毛に感じています。そこで、GitHub ActionsとPull Requestを活用して、同期コミュニケーションを削減する仕組みを紹介します。","tags":["DevOps","開発ツール"],"title":"GitHub ActionsとPull Requestを活用した、同期の自動化"},{"publishedAt":"2022-08-23","slug":"try_dagger","summary":"前々から気になっていた、CI/CD の非ベンダーロックインな Dagger というツールを試してみました。本記事では、試した内容について共有しようと思います。","tags":["バックエンド","DevOps","クローリング"],"title":"CI/CDのDaggerで、GithubActionsとCircleCIにシュッと連携してみた"}],"tag":"DevOps"},{"posts":[{"publishedAt":"2023-01-07","slug":"zod_refine_path","summary":"zodのrefineを使っていたのですが、pathの使い方を全く理解できておらず、小一時間ほどハマってしまったことがあったので、備忘録として残しておきます。","tags":["フロントエンド","クローリング","JavaScript"],"title":"zodのrefineにあるpathにハマった"},{"publishedAt":"2022-10-18","slug":"obsidian-git-muti-device","summary":"WikiWikiWeb というコンセプトが好きで、そのコンセプトが含まれている Obsidian や Scrapbox が好きです。Obsidian には、obsidian-gitという Git 連携のプラグインがあります。こちらには、デスクトップだけでなく、モバイルからでも Git Commit できるようになりました。","tags":["開発ツール","クローリング"],"title":"ObsidianでiPhoneからGit Commitする"},{"publishedAt":"2022-09-14","slug":"crawlee-was-useful-for-crawling","summary":"スクレイピングしたいときって、あると思います。Crawlee という OSS が便利だったので、共有します。","tags":["クローリング"],"title":"クローリングをシュッとやるのに、Crawleeが便利だった"}],"tag":"クローリング"}],"shareUrl":"https://silverbirder.github.io/silverbirder.github.io-new/blog/contents/cloud_run_3_step_glang/"}],["$L4","$L5"],"$L6"]}],"loading":null,"isPartial":false}
4:["$","script","script-0",{"src":"/silverbirder.github.io-new/_next/static/chunks/2af2c9ac095cc29a.js","async":true}]
5:["$","script","script-1",{"src":"/silverbirder.github.io-new/_next/static/chunks/192ccf60ce702378.js","async":true}]
6:["$","$L7",null,{"children":["$","$8",null,{"name":"Next.MetadataOutlet","children":"$@9"}]}]
9:null
